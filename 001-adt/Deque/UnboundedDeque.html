<!DOCTYPE html><html lang="en"><head><title>001-adt/Deque/UnboundedDeque</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="001-adt/Deque/UnboundedDeque"><meta name="groc-project-path" content="js/src/001-adt/Deque/UnboundedDeque.js"><meta name="groc-github-url" content="https://github.com/aureooms/js-collections"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/aureooms/js-collections/blob/master/js/src/001-adt/Deque/UnboundedDeque.js">js/src/001-adt/Deque/UnboundedDeque.js</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">const</span> UnboundedDeque = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> iterable </span>) </span>{

	<span class="hljs-keyword">this</span>.growth = <span class="hljs-number">2</span> ;

	<span class="hljs-keyword">this</span>.minsize = <span class="hljs-number">10</span> ;

	<span class="hljs-keyword">this</span>.currentsize= <span class="hljs-keyword">this</span>.minsize ;

	<span class="hljs-keyword">this</span>.container = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>( <span class="hljs-keyword">this</span>.currentsize) ;

	<span class="hljs-keyword">this</span>.center = <span class="hljs-number">0</span> ;

	<span class="hljs-keyword">this</span>.length = <span class="hljs-number">0</span> ;

	<span class="hljs-keyword">if</span> ( iterable !== <span class="hljs-literal">null</span> ) <span class="hljs-keyword">this</span>.extend( iterable ) ;


} ;

UnboundedDeque.prototype = <span class="hljs-keyword">new</span> ArbitrarySizeDeque( ) ;

UnboundedDeque.prototype._copy = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> container </span>) </span>{

	<span class="hljs-keyword">const</span> len = <span class="hljs-keyword">this</span>.length ;

	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ; i &lt; len ; ++i ) container[i] = <span class="hljs-keyword">this</span>.get( i ) ;

} ;

UnboundedDeque.prototype._realloc = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> newsize </span>) </span>{

	<span class="hljs-keyword">const</span> container = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>( newsize ) ;

	<span class="hljs-keyword">this</span>._copy( container ) ;

	<span class="hljs-keyword">this</span>.container = container ;

	<span class="hljs-keyword">this</span>.center = <span class="hljs-number">0</span> ;

	<span class="hljs-keyword">this</span>.currentsize = newsize ;

} ;


UnboundedDeque.prototype._shrink = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> </span>) </span>{

	<span class="hljs-keyword">const</span> newsize = <span class="hljs-built_in">Math</span>.max( <span class="hljs-keyword">this</span>.minsize , <span class="hljs-keyword">this</span>.length * <span class="hljs-keyword">this</span>.growth ) ;

	<span class="hljs-keyword">if</span> ( newsize * <span class="hljs-keyword">this</span>.growth &gt;= <span class="hljs-keyword">this</span>.currentsize ) <span class="hljs-keyword">return</span> ;

	<span class="hljs-keyword">this</span>._realloc( newsize ) ;

} ;

UnboundedDeque.prototype._grow = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> newlen </span>) </span>{

	<span class="hljs-keyword">if</span> ( newlen &lt;= <span class="hljs-keyword">this</span>.currentsize ) <span class="hljs-keyword">return</span> ;

	<span class="hljs-keyword">this</span>._realloc( newlen * <span class="hljs-keyword">this</span>.growth ) ;

} ;


UnboundedDeque.prototype.len = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> </span>) </span>{

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.length ;

} ;

UnboundedDeque.prototype.capacity = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> </span>) </span>{

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentsize ;

} ;


UnboundedDeque.prototype.append = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> x </span>) </span>{

	<span class="hljs-keyword">this</span>._grow( <span class="hljs-keyword">this</span>.length + <span class="hljs-number">1</span> ) ;

	<span class="hljs-keyword">const</span> i = ( <span class="hljs-keyword">this</span>.center + <span class="hljs-keyword">this</span>.length ) % <span class="hljs-keyword">this</span>.currentsize;
	<span class="hljs-keyword">this</span>.container[i] = x ;
	++<span class="hljs-keyword">this</span>.length ;

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> ;

} ;

UnboundedDeque.prototype.appendleft = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> x </span>) </span>{

	<span class="hljs-keyword">this</span>._grow( <span class="hljs-keyword">this</span>.length + <span class="hljs-number">1</span> ) ;

	--<span class="hljs-keyword">this</span>.center ;
	<span class="hljs-keyword">this</span>.center += <span class="hljs-keyword">this</span>.currentsize;
	<span class="hljs-keyword">this</span>.center %= <span class="hljs-keyword">this</span>.currentsize;
	<span class="hljs-keyword">this</span>.container[<span class="hljs-keyword">this</span>.center] = x ;

	++<span class="hljs-keyword">this</span>.length ;

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> ;

} ;

UnboundedDeque.prototype.clear = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> </span>) </span>{

	<span class="hljs-keyword">this</span>.currentsize= <span class="hljs-keyword">this</span>.minsize ;

	<span class="hljs-keyword">this</span>.container = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>( <span class="hljs-keyword">this</span>.currentsize) ;

	<span class="hljs-keyword">this</span>.center = <span class="hljs-number">0</span> ;

	<span class="hljs-keyword">this</span>.length = <span class="hljs-number">0</span> ;

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> ;

} ;

UnboundedDeque.prototype.copy = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> </span>) </span>{

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UnboundedDeque( <span class="hljs-keyword">this</span> ) ;

} ;

UnboundedDeque.prototype._where = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> i </span>) </span>{

	<span class="hljs-keyword">this</span>._checkbounds( i ) ;

	<span class="hljs-keyword">return</span> [ <span class="hljs-keyword">this</span>.container , ( <span class="hljs-keyword">this</span>.center + i ) % <span class="hljs-keyword">this</span>.currentsize] ;

} ;


UnboundedDeque.prototype._popindex = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> container , index </span>) </span>{

	<span class="hljs-keyword">const</span> value = container[index] ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>GC</p></div></div><div class="code"><div class="wrapper">	container[index] = <span class="hljs-number">0</span> ;

	--<span class="hljs-keyword">this</span>.length ;

	<span class="hljs-keyword">this</span>._shrink( ) ;

	<span class="hljs-keyword">return</span> value ;

} ;

exports.UnboundedDeque = UnboundedDeque ;</div></div></div></div></body></html>